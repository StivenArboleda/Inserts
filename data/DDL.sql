DROP TABLE WORKSON CASCADE CONSTRAINTS;
DROP TABLE PJCT CASCADE CONSTRAINTS;
DROP TABLE DEPARTMENT CASCADE CONSTRAINTS;
DROP TABLE EMPLOYEE CASCADE CONSTRAINTS;

CREATE TABLE EMPLOYEE (
    EMPNO VARCHAR(10) NOT NULL,
    FNAME VARCHAR2(20), 
    LNAME VARCHAR2(20),
    ADDRESS VARCHAR2(30),
    DOB DATE,
    SEX CHAR,
    POSITION VARCHAR2(30),
    DEPARTMENTNO VARCHAR(10),
    PRIMARY KEY (EMPNO),
    CHECK (SEX IN ('M', 'F'))
);

CREATE TABLE DEPARTMENT(
    DEPTNO VARCHAR(10) NOT NULL,
    DEPTNAME VARCHAR2(30),
    MGREMPNO VARCHAR(10),
    PRIMARY KEY (DEPTNO)
);


CREATE TABLE PJCT (
    PROJNO VARCHAR(10) NOT NULL,
    PROJNAME VARCHAR2(30),
    DEPARTMENTNO VARCHAR(10),
    PRIMARY KEY (PROJNO)
);

CREATE TABLE WORKSON(
    EMPLOYEENO VARCHAR(10),
    PROJECNO VARCHAR(10),
    DATEWORKED DATE,
    HOURSWORKED INTEGER,
    PRIMARY KEY (EMPLOYEENO, PROJECNO)
);

ALTER TABLE EMPLOYEE
    ADD CONSTRAINT FK_EMP_DEPT
    FOREIGN KEY (DEPARTMENTNO) REFERENCES DEPARTMENT(DEPTNO);
    
ALTER TABLE DEPARTMENT
    ADD CONSTRAINT FK_DEPT_EMP
    FOREIGN KEY (MGREMPNO) REFERENCES EMPLOYEE (EMPNO);

ALTER TABLE PJCT
    ADD CONSTRAINT FK_PJCT_DEPT
    FOREIGN KEY (DEPARTMENTNO) REFERENCES DEPARTMENT (DEPTNO);
    
ALTER TABLE WORKSON
    ADD CONSTRAINT FK_WKS_EMP
    FOREIGN KEY (EMPLOYEENO) REFERENCES EMPLOYEE (EMPNO);
    
ALTER TABLE WORKSON
    ADD CONSTRAINT FK_WKS_PJCT
    FOREIGN KEY (PROJECNO) REFERENCES PJCT (PROJNO);

